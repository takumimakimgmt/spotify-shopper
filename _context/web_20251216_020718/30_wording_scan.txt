## wording scan
app/components/AnalyzeForm.tsx:17:  progressItems: ProgressItem[];
app/components/AnalyzeForm.tsx:41:    () => props.progressItems.some((p) => p.status === 'error'),
app/components/AnalyzeForm.tsx:42:    [props.progressItems]
app/components/AnalyzeForm.tsx:104:              Apple Music may take up to {APPLE_TIMEOUT_S}s (browser rendering + Spotify enrichment). If it times out, retry with a single Apple URL.
app/components/AnalyzeForm.tsx:112:          <div className="flex flex-col sm:flex-row items-start sm:items-center gap-3">
app/components/AnalyzeForm.tsx:125:              className={`inline-flex items-center rounded-md px-3 py-1.5 text-xs font-semibold ${
app/components/AnalyzeForm.tsx:139:        <div className="flex items-center justify-between gap-3">
app/components/AnalyzeForm.tsx:140:          <label className="inline-flex items-center gap-2 text-sm text-slate-200">
app/components/AnalyzeForm.tsx:151:          <div className="relative flex gap-1 items-center">
app/components/AnalyzeForm.tsx:155:              className="inline-flex items-center justify-center rounded-md bg-emerald-500 px-4 py-2 text-sm font-medium text-black hover:bg-emerald-400 disabled:opacity-60"
app/components/AnalyzeForm.tsx:171:                className="inline-flex items-center justify-center rounded-md bg-slate-700 px-3 py-2 text-xs font-medium text-white hover:bg-slate-600"
app/components/AnalyzeForm.tsx:181:                className="inline-flex items-center justify-center rounded-md bg-slate-700 px-3 py-2 text-xs font-medium text-white hover:bg-slate-600"
app/components/AnalyzeForm.tsx:192:              className="inline-flex items-center justify-center rounded-md bg-slate-700 px-2 py-2 text-xs text-slate-300 hover:bg-slate-600 disabled:opacity-60"
app/components/ResultSummaryBar.tsx:20:  const cacheHit = result.meta?.cache_hit ?? false;
app/components/ResultSummaryBar.tsx:21:  const refreshUsed = result.meta?.refresh ?? false;
app/components/ResultSummaryBar.tsx:42:      {/* Badge row: cache_hit, refresh */}
app/components/ResultSummaryBar.tsx:44:        <div className="flex flex-wrap gap-2 items-center">
app/components/ResultSummaryBar.tsx:46:            <span className="inline-flex items-center gap-1 rounded-full bg-blue-500/20 px-2.5 py-1 text-xs text-blue-300">
app/components/ResultSummaryBar.tsx:50:          {refreshUsed && (
app/components/ResultSummaryBar.tsx:51:            <span className="inline-flex items-center gap-1 rounded-full bg-amber-500/20 px-2.5 py-1 text-xs text-amber-300">
app/components/ProcessingBar.tsx:17:      <div className="flex items-center justify-between text-xs text-slate-300">
app/components/ProgressList.tsx:7:  status: 'pending' | 'fetching' | 'parsing' | 'done' | 'error';
app/components/ProgressList.tsx:12:  items: ProgressItem[];
app/components/ProgressList.tsx:18:  fetching: 'ðŸ“¡',
app/components/ProgressList.tsx:19:  parsing: 'âš™ï¸',
app/components/ProgressList.tsx:26:  fetching: 'Loading',
app/components/ProgressList.tsx:27:  parsing: 'Analyzing',
app/components/ProgressList.tsx:32:export default function ProgressList({ items, isProcessing }: ProgressListProps) {
app/components/ProgressList.tsx:33:  if (!isProcessing || items.length === 0) {
app/components/ProgressList.tsx:37:  const total = items.length;
app/components/ProgressList.tsx:38:  const completed = items.filter((i) => i.status === 'done' || i.status === 'error').length;
app/components/ProgressList.tsx:46:        {items.map((item, idx) => (
app/components/ProgressList.tsx:49:            className="flex items-center gap-2 text-xs text-slate-300 bg-slate-900/30 rounded px-3 py-2"
app/api/share/route.ts:31:    const resp = await fetch(`${UPSTASH_URL}/setex/${encodeURIComponent(key)}/${ttl}/${encodeURIComponent(JSON.stringify(snapshot))}`, {
app/api/share/[id]/route.ts:12:  { params }: { params: Promise<{ id: string }> }
app/api/share/[id]/route.ts:14:  const { id } = await params;
app/api/share/[id]/route.ts:21:  const resp = await fetch(`${UPSTASH_URL}/get/${encodeURIComponent(key)}`, {
app/api/share/[id]/route.ts:33:    const snapshot = JSON.parse(value);
app/page.tsx:127:        <div className="flex items-center justify-between text-xs text-slate-300">
app/page.tsx:157:          const parsed = JSON.parse(savedResults);
app/page.tsx:158:          setMultiResults(parsed);
app/page.tsx:272:            const resp = await fetch(
app/page.tsx:355:      const resp = await fetch(
app/page.tsx:477:          res = await fetch(`${BACKEND_URL}/api/playlist-with-rekordbox-upload`, {
app/page.tsx:483:          const params = new URLSearchParams({ url, source: effectiveSource });
app/page.tsx:484:          res = await fetch(`${BACKEND_URL}/api/playlist?${params.toString()}` , { signal: abortRef.current.signal });
app/page.tsx:492:          body = rawText ? JSON.parse(rawText) : null;
app/page.tsx:601:            // ignore parse issues
app/page.tsx:602:            console.log('[DEBUG] Error parsing error response, using generic message');
app/page.tsx:653:              `[PERF] url=${url.substring(0, 60)} tracks=${rows.length} network_ms=${networkMs.toFixed(1)} json_ms=${jsonMs.toFixed(1)} render_ms=${renderMs.toFixed(1)} total_ms=${totalMs.toFixed(1)} payload_bytes=${payloadBytes}`
app/page.tsx:735:      filtered = filtered.filter((t) => categorizeTrack(t) === 'checkout');
app/page.tsx:744:    checkout: 'To buy',
app/page.tsx:807:            Playlist Shopper â€” Spotify & Apple Music
app/page.tsx:810:            Fetch playlists from Spotify or Apple Music and optionally upload your Rekordbox collection XML
app/page.tsx:818:            <div className="flex items-center justify-between text-sm text-slate-200">
app/page.tsx:819:              <div className="flex items-center gap-2">
app/page.tsx:822:                  <span className="inline-flex items-center gap-1 rounded-full bg-emerald-600/20 px-2 py-0.5 text-[11px] text-emerald-200">
app/page.tsx:830:                className="px-3 py-1 rounded bg-slate-800 border border-slate-700 hover:bg-slate-700 text-emerald-200 flex items-center gap-2"
app/page.tsx:850:              progressItems={analyzer.progressItems}
app/page.tsx:860:              <ProgressList items={analyzer.progressItems} isProcessing={analyzer.isProcessing} />
app/page.tsx:886:            <div className="flex items-center gap-3 pb-2 border-b border-slate-800">
app/page.tsx:893:                      className={`flex items-center gap-1.5 px-3 py-2 text-sm whitespace-nowrap rounded-t-lg transition ${
app/page.tsx:901:                        className="text-left min-w-0 flex items-center gap-1.5"
app/page.tsx:945:                <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
app/page.tsx:1012:                            const res = await fetch(`${BACKEND_URL}/api/match-snapshot-with-xml`, {
app/page.tsx:1114:                    // Prioritize apple_url for Apple Music playlists, spotify_url for Spotify
app/page.tsx:1131:                        <div className="flex items-start justify-between gap-2">
app/page.tsx:1133:                            <div className="flex items-center gap-2">
app/page.tsx:1161:                                  className="inline-flex items-center gap-1 rounded-full border border-emerald-500 bg-emerald-500/10 hover:bg-emerald-500/20 px-2 py-0.5 transition"
app/page.tsx:1173:                                    className="inline-flex items-center rounded-full border border-slate-600 px-2 py-0.5 hover:bg-slate-700"
app/page.tsx:1204:                        const sections: Array<{ id: TrackCategory; label: string; color: string; items: PlaylistRow[]; icon: string }> = [
app/page.tsx:1205:                          { id: 'checkout', label: categoryLabels.checkout, color: 'text-amber-300', icon: 'ðŸ›’', items: displayedTracks.filter((t) => categorizeTrack(t) === 'checkout') },
app/page.tsx:1206:                          { id: 'owned', label: categoryLabels.owned, color: 'text-emerald-300', icon: 'âœ…', items: displayedTracks.filter((t) => categorizeTrack(t) === 'owned') },
app/page.tsx:1210:                          if (section.items.length === 0) return [];
app/page.tsx:1215:                                  {section.icon} {section.label} ({section.items.length})
app/page.tsx:1219:                            ...section.items.map((t) => {
app/page.tsx:1220:                              // Prioritize apple_url for Apple Music playlists, spotify_url for Spotify
app/page.tsx:1268:                                        <div className="flex items-center gap-1">
app/page.tsx:1274:                                            className="inline-flex items-center gap-1 rounded-full border border-emerald-500 bg-emerald-500/10 hover:bg-emerald-500/20 px-2.5 py-0.5 transition"
app/page.tsx:1294:                                                      className="inline-flex items-center rounded-full border border-slate-600 px-2 py-0.5 hover:bg-slate-700 transition text-[10px] text-slate-300"
lib/state/usePlaylistAnalyzer.ts:23:  return 'checkout';
lib/state/usePlaylistAnalyzer.ts:81:  // Progress items for per-URL status visualization
lib/state/usePlaylistAnalyzer.ts:82:  type ProgressStatus = 'pending' | 'fetching' | 'done' | 'error';
lib/state/usePlaylistAnalyzer.ts:83:  const [progressItems, setProgressItems] = useState<Array<{ url: string; status: ProgressStatus; message?: string }>>([]);
lib/state/usePlaylistAnalyzer.ts:96:        const parsed = JSON.parse(savedResults);
lib/state/usePlaylistAnalyzer.ts:97:        setMultiResults(parsed);
lib/state/usePlaylistAnalyzer.ts:162:      filtered = filtered.filter((t) => categorizeTrack(t) === 'checkout');
lib/state/usePlaylistAnalyzer.ts:299:    // Initialize progress items for each URL
lib/state/usePlaylistAnalyzer.ts:300:    setProgressItems(urls.map((url) => ({ url, status: 'pending' as ProgressStatus })));
lib/state/usePlaylistAnalyzer.ts:325:        // Mark fetching start (Apple calls out longer wait explicitly)
lib/state/usePlaylistAnalyzer.ts:326:        setProgressItems((prev) =>
lib/state/usePlaylistAnalyzer.ts:331:                  status: 'fetching',
lib/state/usePlaylistAnalyzer.ts:332:                  message: isForceRefresh ? 'force refresh' : 'fetching',
lib/state/usePlaylistAnalyzer.ts:354:            refresh: isForceRefresh,
lib/state/usePlaylistAnalyzer.ts:361:            refresh: isForceRefresh,
lib/state/usePlaylistAnalyzer.ts:386:        setProgressItems((prev) =>
lib/state/usePlaylistAnalyzer.ts:396:              `[PERF] url=${url.substring(0, 60)} tracks=${rows.length} total_ms=${totalMs.toFixed(1)} payload_bytes=${payloadBytes}`
lib/state/usePlaylistAnalyzer.ts:404:        setProgressItems((prev) =>
lib/state/usePlaylistAnalyzer.ts:581:    setProgressItems([]);
lib/state/usePlaylistAnalyzer.ts:585:    const failedUrls = progressItems.filter((p) => p.status === 'error').map((p) => p.url);
lib/state/usePlaylistAnalyzer.ts:620:    progressItems,
lib/types.ts:12:  cache_hit?: boolean;
lib/types.ts:14:  refresh?: number;
lib/types.ts:15:  fetch_ms?: number;
lib/types.ts:16:  enrich_ms?: number;
lib/types.ts:17:  total_backend_ms?: number;
lib/types.ts:18:  total_api_ms?: number;
lib/types.ts:74:export type TrackCategory = 'checkout' | 'owned';
lib/api/share.ts:1:import { fetchJsonWithBase } from './client';
lib/api/share.ts:6:  return fetchJsonWithBase<{ id: string }>(`/api/share/${encodeURIComponent(id)}`, {
lib/api/share.ts:14:  return fetchJsonWithBase<SharePayload>(`/api/share/${encodeURIComponent(id)}`);
lib/api/playlist.ts:2:import { fetchJsonWithBase, getBackendUrl } from './client';
lib/api/playlist.ts:4:export async function getPlaylist(params: {
lib/api/playlist.ts:7:  refresh?: boolean;
lib/api/playlist.ts:10:  const search = new URLSearchParams({ url: params.url, source: params.source });
lib/api/playlist.ts:11:  if (params.refresh) {
lib/api/playlist.ts:12:    search.set('refresh', '1');
lib/api/playlist.ts:14:  return fetchJsonWithBase<ApiPlaylistResponse>(`/api/playlist?${search.toString()}`, {
lib/api/playlist.ts:15:    signal: params.signal,
lib/api/playlist.ts:19:export async function postPlaylistWithRekordboxUpload(params: {
lib/api/playlist.ts:23:  refresh?: boolean;
lib/api/playlist.ts:27:  form.append('url', params.url);
lib/api/playlist.ts:28:  form.append('source', params.source);
lib/api/playlist.ts:29:  form.append('file', params.file);
lib/api/playlist.ts:30:  form.append('rekordbox_xml', params.file);
lib/api/playlist.ts:31:  if (params.refresh) {
lib/api/playlist.ts:32:    form.append('refresh', '1');
lib/api/playlist.ts:35:  return fetchJsonWithBase<ApiPlaylistResponse>('/api/playlist-with-rekordbox-upload', {
lib/api/playlist.ts:38:    signal: params.signal,
lib/api/playlist.ts:52:  return fetchJsonWithBase<ApiPlaylistResponse>('/api/match-snapshot-with-xml', {
lib/api/client.ts:7:export async function fetchJson<T>(path: string, init?: RequestInit): Promise<T> {
lib/api/client.ts:8:  const res = await fetch(path, init);
lib/api/client.ts:10:  const data = text ? (JSON.parse(text) as T) : ({} as T);
lib/api/client.ts:17:export async function fetchJsonWithBase<T>(path: string, init?: RequestInit): Promise<T> {
lib/api/client.ts:19:  return fetchJson<T>(url, init);
